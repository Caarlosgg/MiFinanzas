<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Movimientos</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
    <div class="container-fluid">
        <a class="navbar-brand" href="/dashboard">MiFinanzas</a>
        <div>
            <a class="btn btn-outline-light me-2" href="/movimientos">Movimientos</a>
            <a class="btn btn-outline-light me-2" href="/presupuestos">Presupuestos</a>
            <a class="btn btn-outline-light me-2" href="/metas">Metas</a>
            <a class="btn btn-outline-light me-2" href="/exportar">Exportar</a>
            <a class="btn btn-outline-light" th:href="@{/logout}">Cerrar sesiÃ³n</a>
        </div>
    </div>
</nav>

<div class="container-lg">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="text-secondary">Lista de movimientos</h4>
        <a href="/movimientos/nuevo" class="btn btn-primary">+ Nuevo Movimiento</a>
    </div>

    <div th:if="${#lists.isEmpty(movimientos)}"
         class="alert alert-info text-center">
        No hay movimientos registrados.
    </div>

    <table th:if="${!#lists.isEmpty(movimientos)}"
           class="table table-striped table-hover">
        <thead class="table-dark">
        <tr>
            <th>Tipo</th>
            <th>CategorÃ­a</th>
            <th>Cantidad (â‚¬)</th>
            <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="mov : ${movimientos}">
            <td th:text="${mov.tipo}" class="text-capitalize">Ingreso</td>
            <td th:text="${mov.categoria}" class="text-capitalize">Ocio</td>
            <td th:text="${#numbers.formatDecimal(mov.cantidad,1,'COMMA',2,'POINT')}">
                100,00
            </td>
            <td>
                <form th:action="@{'/movimientos/eliminar/' + ${mov.id}}"
                      method="post" style="display:inline">
                    <input type="hidden" th:name="${_csrf.parameterName}"
                           th:value="${_csrf.token}" />
                    <button type="submit" class="btn btn-sm btn-danger">ðŸ—‘ Eliminar</button>
                </form>

            </td>
        </tr>
        </tbody>
    </table>
</div>

<footer class="text-center mt-4 mb-3 text-muted">
    <small>MiFinanzas Â© 2025</small>
</footer>

</body>
</html>
